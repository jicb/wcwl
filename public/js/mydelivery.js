/**
 * Created by jicb on 2016/9/30.
 */
var data=eval("(<?php echo $data; ?>)");var openid="{!! $openid !!}";var contentVue=new Vue({el:"#content",data:{send:{name:"发货人信息",phone:"",pca:"",street:"详细地址"},receive:{name:"收货人信息",phone:"",pca:"",street:"详细地址"},paymethod:"发货方付款",takeway:"网点自提",receiptstyle:"1份回单"}});var sendVue=new Vue({el:"#popup-send",data:{type:"常用发货方信息",name:$("#send-user").text(),phone:$("#send-phone").text(),pca:$("#send-pca").text(),street:$("#send-street").text()}});var sendSelectVue=new Vue({el:"#popup-send-select",data:{items:data.send,type:"发货方"}});var receiveVue=new Vue({el:"#popup-receive",data:{type:"常用收货方信息",name:$("#receive-user").text(),phone:$("#receive-phone").text(),pca:$("#receive-pca").text(),street:$("#receive-street").text()}});var receiveSelectVue=new Vue({el:"#popup-receive-select",data:{items:data.receive,type:"收货方"}});var cargoVue=new Vue({el:"#popup-cargo",data:{name:$("#cargo-name").text(),count:$("#cargo-count").text(),weight:$("#cargo-weight").text(),volume:$("#cargo-volume").text()}});var myApp=new Framework7();var $$=Dom7;var mainView=myApp.addView(".view-main",{dynamicNavbar:true});var ssq={"湖北":{"武汉":["江岸区","江汉区","硚口区","汉阳区","武昌区","青山区","洪山区","东西湖区","汉南区","蔡甸区","江夏区","黄陂区","新洲区"]}};var ss={"湖北":["武汉"],};var pickerSend=myApp.picker({input:".city-picker-send",rotateEffect:true,formatValue:function(b,a){return a[0]+" "+a[1]+" "+a[2]},cols:[{textAlign:"left",values:["湖北"],onChange:function(b,a){if(b.cols[1].replaceValues){b.cols[1].replaceValues(ss[a])}}},{textAlign:"left",values:ss["湖北"],onChange:function(a,b){if(a.cols[2].replaceValues){a.cols[2].replaceValues(ssq[a.cols[0].value][b])}}},{values:ssq["湖北"]["武汉"]}]});var pickerReceive=myApp.picker({input:".city-picker-receive",rotateEffect:true,formatValue:function(b,a){return a[0]+" "+a[1]+" "+a[2]},cols:[{textAlign:"left",values:["湖北"],onChange:function(b,a){if(b.cols[1].replaceValues){b.cols[1].replaceValues(ss[a])}}},{textAlign:"left",values:ss["湖北"],onChange:function(a,b){if(a.cols[2].replaceValues){a.cols[2].replaceValues(ssq[a.cols[0].value][b])}}},{values:ssq["湖北"]["武汉"]}]});$("#pay-method").on("click",function(){var c=[{text:"选择付款方式",label:true},{text:"发货方付款",onClick:function(){$("#pay").text("发货方付款")}},{text:"收货方付款",onClick:function(){$("#pay").text("收货方付款")}},{text:"发货方月结",onClick:function(){$("#pay").text("发货方月结")}}];var b=[{text:"取消",color:"red"}];var a=[c,b];myApp.actions(a)});$("#take-way").on("click",function(){var c=[{text:"选择提货方式",label:true},{text:"网点自提",onClick:function(){$("#take").text("网点自提")}},{text:"送货上门",onClick:function(){$("#take").text("送货上门")}}];var b=[{text:"取消",color:"red"}];var a=[c,b];myApp.actions(a)});$("#receipt-style").on("click",function(){var c=[{text:"选择回单要求",label:true},{text:"签回单",onClick:function(){$("#receipt").text("签回单")}},{text:"签托运单",onClick:function(){$("#receipt").text("签托运单")}},{text:"签信封",onClick:function(){$("#receipt").text("签信封")}},{text:"签回单盖章",onClick:function(){$("#receipt").text("签回单盖章")}},{text:"1份回单",onClick:function(){$("#receipt").text("1份回单")}},{text:"2份回单",onClick:function(){$("#receipt").text("2份回单")}},{text:"3份回单",onClick:function(){$("#receipt").text("3份回单")}}];var b=[{text:"取消",color:"red"}];var a=[c,b];myApp.actions(a)});function getQuery(){var p=data.member_id;var g=$("#send-user").text();var h=$("#send-phone").text();var d=$("#send-pca").text();var q=$("#from-street").text();var n=$("#receive-user").text();var l=$("#receive-phone").text();var j=$("#receive-pca").text();var a=$("#receive-street").text();var c=$("#cargo-name").text();var o=$("#cargo-count").text();var f=$("#cargo-weight").text();var k=$("#cargo-volume").text();var r=$("#cargo-insure").text();var e=$("#take").text();var i=$("#receipt").text();var m=r;var b=$("#comment").val();return{member_id:p,from_name:g,from_phone:h,from_pca:d,from_street:q,to_name:n,to_phone:l,to_pca:j,to_street:a,cargo_name:c,cargo_count:o,cargo_weight:f,cargo_volume:k,cargo_insure:r,exchange_type:e,receipt_type:i,price:m,comment:b}}function insertOrderWaybill(){var a=null;myApp.confirm("您确定要提交订单吗？","提交订单",function(){var b=getQuery();$.post("createorder",b,function(c){a=c.order_id;myApp.alert("订单已成功完成","订单提交",function(){window.location.href="ordertouser?openid="+openid+"&order_id="+a;var e=function d(){WeixinJSBridge.invoke("closeWindow",{},function(f){})};if(typeof WeixinJSBridge==="undefined"){document.addEventListener("WeixinJSBridgeReady",e,false)}else{e()}})})})}function insertSend(){$("#send-user").text($("#send-insert-name").val());$("#send-phone").text($("#send-insert-phone").val());$("#send-pca").text($("#send-insert-pca").val());$("#send-street").text($("#send-insert-street").val())}function insertReceive(){$("#receive-user").text($("#receive-insert-name").val());$("#receive-phone").text($("#receive-insert-phone").val());$("#receive-pca").text($("#receive-insert-pca").val());$("#receive-street").text($("#receive-insert-street").val())}function insertCargo(){$("#cargo-name").text($("#cargo-insert-name").val());$("#cargo-count").text($("#cargo-insert-count").val());$("#cargo-weight").text($("#cargo-insert-weight").val());$("#cargo-volume").text($("#cargo-insert-volume").val())}function insertSendData(){var b=$("input[name='popup-send-index']:checked");if(b&&b.length){var a=b.val();$("#send-insert-name").val(sendSelectVue.items[a].name);$("#send-insert-phone").val(sendSelectVue.items[a].phone);$("#send-insert-pca").val(sendSelectVue.items[a].pca);$("#send-insert-street").val(sendSelectVue.items[a].street)}}function insertReceiveData(){var b=$("input[name='popup-receive-index']:checked");if(b&&b.length){var a=b.val();$("#receive-insert-name").val(receiveSelectVue.items[a].name);$("#receive-insert-phone").val(receiveSelectVue.items[a].phone);$("#receive-insert-pca").val(receiveSelectVue.items[a].pca);$("#receive-insert-street").val(receiveSelectVue.items[a].street)}}document.addEventListener("DOMContentLoaded",function(){document.body.style.display="block"});
